import o from"@typo3/core/ajax/ajax-request.js";import t from"@typo3/backend/notification.js";import s from"@typo3/backend/modal.js";import{SeverityEnum as c}from"@typo3/backend/enum/severity.js";function u(n,a){s.confirm(TYPO3.lang["contextMenu.recursiveSlugUpdate.confirm.title"]||"Regenerate URL Paths",TYPO3.lang["contextMenu.recursiveSlugUpdate.confirm.message"]||"This will regenerate URL paths for all child pages based on their source fields. Continue?",c.warning,[{text:TYPO3.lang["button.cancel"]||"Cancel",active:!0,btnClass:"btn-default",trigger:()=>{s.dismiss()}},{text:TYPO3.lang["contextMenu.recursiveSlugUpdate.confirm.title"]||"Regenerate URL Paths",btnClass:"btn-warning",trigger:()=>{s.dismiss(),d(a)}}])}async function d(n){try{const e=await(await new o(TYPO3.settings.ajaxUrls.sluggi_recursive_slug_update).withQueryArguments({id:n}).get()).resolve();if(e.success){const i=TYPO3.lang["contextMenu.recursiveSlugUpdate.confirm.title"]||"URL Paths";if(e.updated>0){const r=[];r.push(`${e.updated} updated`),e.skipped>0&&r.push(`${e.skipped} skipped`),t.success(i,r.join(", ")+"."),e.correlations&&document.dispatchEvent(new CustomEvent("typo3:redirects:slugChanged",{detail:{componentName:"redirects",eventName:"slugChanged",correlations:e.correlations,autoUpdateSlugs:!0,autoCreateRedirects:!1}}))}else t.info(i,"No URL paths needed updating.");document.dispatchEvent(new CustomEvent("typo3:pagetree:refresh"))}else t.error("Error",e.message||"Update failed.")}catch{t.error("Error","An unexpected error occurred.")}}const f={recursiveSlugUpdate:u};export{f as default};
//# sourceMappingURL=context-menu-actions.js.map
